document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("card-container"),t=document.getElementById("article-url"),n=document.getElementById("submit-btn"),r=(document.getElementById("signup-form"),document.getElementById("login-form"),document.getElementById("dash-logout")),a=document.getElementById("article-btn"),o=document.getElementById("article-container"),l=document.getElementById("cancel"),c=document.getElementById("delete-article"),s=document.getElementById("share-article");document.getElementById("like-article");let d=JSON.parse(localStorage.getItem("users"))||[],i=JSON.parse(localStorage.getItem("articles"))||[],u=0;function m(n){const r=document.createElement("div");r.classList.add("card"),r.innerHTML=`\n      <img src="${n.imageUrl}" alt="Avatar" style="width:100%">\n      <div class="container">\n        <h4><b>${n.title}</b></h4>\n        <p>${n.description}</p>\n      </div>\n      <div class='features'>\n        <button id="like-article" class="btn btn-primary"> <i class="fa-regular fa-star"></i></button>\n        <button><a href="${t.value}" target="_blank" class="btn btn-primary">Read More</a></button>\n        <button class='share-btn' id='share-article'> <i class="fa-regular fa-share-from-square"></i></button>\n        <button id='delete-article'> <i class="fa-regular fa-trash-can" ></i></button>\n      </div>\n    `,e.appendChild(r),u++,u%3==0&&e.appendChild(document.createElement("br"))}function g(e){window.location.href=e}n?n.addEventListener("click",(async e=>{e.preventDefault();const n=t.value;if(n)try{const e=(await async function(e){try{const t=await fetch(`http://localhost:3000/dashboard?url=${encodeURIComponent(e)}`),n=await t.json();console.log(n);const r={title:n.title,description:n.description,imageUrl:n.imageUrl};return i.push(r),localStorage.setItem("articles",JSON.stringify(i)),m(n),n}catch(e){throw console.error("Error fetching article data:",e),e}}(n)).data;console.log(e),m(e)}catch(e){console.error("Error fetching article data:",e)}})):console.error("Article submit button not found"),c?c.addEventListener("click",(e=>{e.preventDefault(),document.querySelector(".card").remove()})):console.error("Delete article button not found");const f=document.getElementById("signup-form");f?f.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("email").value,n=document.getElementById("password").value;var r,a;r=t,a=n,d.some((e=>e.email===r))?alert("User already exists. Please login or use another email"):(d.push({email:r,password:a}),localStorage.setItem("users",JSON.stringify(d))),console.log(d),g("./dashboard.html")})):console.error("Registration form element not found");const h=document.getElementById("login-form");h?h.addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("email").value,n=document.getElementById("password").value;var r,a;r=t,a=n,d.find((e=>e.email===r&&e.password===a))?(alert("Login successful"),g("./dashboard.html")):alert("Login failed")})):console.error("Login form element not found"),r?r.addEventListener("click",(e=>{e.preventDefault(),g("./index.html")})):console.error("Logout button not found"),a&&o&&l?(a.addEventListener("click",(e=>{e.preventDefault(),o.style.display="block"})),l.addEventListener("click",(e=>{e.preventDefault(),o.style.display="none"}))):console.error("Article-related elements not found"),c&&c.addEventListener("click",(e=>{e.preventDefault(),document.querySelector(".card").remove()})),s&&s.addEventListener("click",(e=>{e.preventDefault(),navigator.share?navigator.share({title:"Web Share API Demo",url:`${t.value}`}).then((()=>{alert("Thanks for sharing!")})).catch(console.error):alert("Web share not supported")}))}));