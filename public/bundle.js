/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./public/app.js":
/*!***********************!*\
  !*** ./public/app.js ***!
  \***********************/
/***/ (() => {

eval("document.addEventListener(\"DOMContentLoaded\", () => {\r\n  const API_URL = \"http://localhost:3000/dashboard\";\r\n\r\n  const cardContainer = document.getElementById(\"card-container\");\r\n  const articleUrl = document.getElementById(\"article-url\");\r\n  const articleSubmitBtn = document.getElementById(\"submit-btn\");\r\n  // const registerForm = document.getElementById(\"signup-form\");\r\n  // const loginForm = document.getElementById(\"login-form\");\r\n  const dashLogout = document.getElementById(\"dash-logout\");\r\n  const articleBtn = document.getElementById(\"article-btn\");\r\n  const articleContainer = document.getElementById(\"article-container\");\r\n  const articleCloseBtn = document.getElementById(\"cancel\");\r\n  const deleteArticleBtn = document.querySelector(\"delete-article\");\r\n  const shareArticleBtn = document.getElementById(\"share-article\");\r\n  const likeArticleBtn = document.getElementById(\"like-article\");\r\n\r\n  let users = JSON.parse(localStorage.getItem(\"users\")) || [];\r\n  let articles = JSON.parse(localStorage.getItem(\"articles\")) || [];\r\n  let articleCount = 0;\r\n\r\n  function displayArticle(data, articleId) {\r\n    const card = document.createElement(\"div\");\r\n    card.classList.add(\"card\");\r\n    card.innerHTML = `\r\n      <img src=\"${data.imageUrl}\" alt=\"Avatar\" style=\"width:100%\">\r\n      <div class=\"container\">\r\n        <h4><b>${data.title}</b></h4>\r\n        <p>${data.description}</p>\r\n      </div>\r\n      <div class='features'>\r\n        <button class=\"btn btn-primary like-article\"> <i class=\"fa-regular fa-star\"></i></button>\r\n        <button><a href=\"${articleUrl.value}\" target=\"_blank\" class=\"btn btn-primary\">Read More</a></button>\r\n        <button class='share-article'><i class=\"fa-regular fa-share-from-square\"></i></button>\r\n        <button class='delete-article'> <i class=\"fa-regular fa-trash-can\" ></i></button>\r\n      </div>\r\n    `;\r\n\r\n    card.setAttribute(\"data-article-id\", articleCount);\r\n\r\n    // to like the article\r\n\r\n    const likeButton = card.querySelector(\".like-article\");\r\n    likeButton.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      likeButton.classList.toggle(\"liked\");\r\n    });\r\n\r\n    // to delete the article\r\n    const deleteButton = card.querySelector(\".delete-article\");\r\n    deleteButton.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      const card = e.target.closest(\".card\");\r\n      const articleId = card.getAttribute(\"data-article-id\");\r\n\r\n      const userArticles =\r\n        JSON.parse(localStorage.getItem(\"userArticles\")) || [];\r\n      const updatedArticles = userArticles.filter(\r\n        (article, index) => index !== parseInt(articleId)\r\n      );\r\n      localStorage.setItem(\"userArticles\", JSON.stringify(updatedArticles));\r\n\r\n      card.remove();\r\n    });\r\n\r\n    // to share the article\r\n\r\n    const shareButton = card.querySelector(\".share-article\");\r\n    shareButton.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      if (navigator.share) {\r\n        navigator\r\n          .share({\r\n            title: \"Web Share API Demo\",\r\n            url: `${articleUrl.value}`,\r\n          })\r\n          .then(() => {\r\n            alert(\"Thanks for sharing!\");\r\n          })\r\n          .catch(console.error);\r\n      } else {\r\n        alert(\"Web share not supported\");\r\n      }\r\n    });\r\n\r\n    cardContainer.appendChild(card);\r\n\r\n    articleCount++;\r\n    if (articleCount % 3 === 0) {\r\n      cardContainer.appendChild(document.createElement(\"br\"));\r\n    }\r\n  }\r\n\r\n  // to delete the article\r\n\r\n  if (deleteArticleBtn) {\r\n    deleteArticleBtn.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      const card = e.target.closest(\".card\");\r\n      const articleId = card.getAttribute(\"data-article-id\");\r\n\r\n      const userArticles =\r\n        JSON.parse(localStorage.getItem(\"userArticles\")) || [];\r\n      const updatedArticles = userArticles.filter(\r\n        (article, index) => index !== parseInt(articleId)\r\n      );\r\n      localStorage.setItem(\"userArticles\", JSON.stringify(updatedArticles));\r\n\r\n      card.remove();\r\n    });\r\n  }\r\n\r\n  async function fetchArticleData(url) {\r\n    try {\r\n      const response = await fetch(`${API_URL}?url=${encodeURIComponent(url)}`);\r\n      const data = await response.json();\r\n      console.log(data);\r\n\r\n      const article = {\r\n        title: data.title,\r\n        description: data.description,\r\n        imageUrl: data.imageUrl,\r\n      };\r\n\r\n      articles.push(article);\r\n      localStorage.setItem(\"articles\", JSON.stringify(articles));\r\n\r\n      const userArticles =\r\n        JSON.parse(localStorage.getItem(\"userArticles\")) || [];\r\n      userArticles.push(article);\r\n      localStorage.setItem(\"userArticles\", JSON.stringify(userArticles));\r\n\r\n      displayArticle(data);\r\n\r\n      return data;\r\n    } catch (error) {\r\n      console.error(\"Error fetching article data:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  if (articleSubmitBtn) {\r\n    articleSubmitBtn.addEventListener(\"click\", async (e) => {\r\n      e.preventDefault();\r\n      const articleUrlValue = articleUrl.value;\r\n      if (articleUrlValue) {\r\n        try {\r\n          const response = await fetchArticleData(articleUrlValue);\r\n          const articleData = response.data;\r\n          console.log(articleData);\r\n          displayArticle(articleData);\r\n        } catch (error) {\r\n          console.error(\"Error fetching article data:\", error);\r\n        }\r\n      }\r\n    });\r\n  } else {\r\n    console.error(\"Article submit button not found\");\r\n  }\r\n\r\n  if (deleteArticleBtn) {\r\n    deleteArticleBtn.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      const card = document.querySelector(\".card\");\r\n      card.remove();\r\n    });\r\n  } else {\r\n    console.error(\"Delete article button not found\");\r\n  }\r\n\r\n  function registerUser(email, password) {\r\n    // To check if the user already exists\r\n    const userExists = users.some((user) => user.email === email);\r\n    if (userExists) {\r\n      alert(\"User already exists. Please login or use another email\");\r\n      return;\r\n    }\r\n\r\n    users.push({\r\n      email: email,\r\n      password: password,\r\n    });\r\n    localStorage.setItem(\"users\", JSON.stringify(users));\r\n  }\r\n\r\n  function loginUser(email, password) {\r\n    return users.find((user) => {\r\n      return user.email === email && user.password === password;\r\n    });\r\n  }\r\n\r\n  function redirectTo(url) {\r\n    window.location.href = url;\r\n  }\r\n\r\n  // Event listener for user registration\r\n  const register = document.getElementById(\"signup-form\");\r\n  if (register) {\r\n    register.addEventListener(\"submit\", (e) => {\r\n      e.preventDefault();\r\n      const emailValue = document.getElementById(\"email\").value;\r\n      const passwordValue = document.getElementById(\"password\").value;\r\n      registerUser(emailValue, passwordValue);\r\n      console.log(users);\r\n      redirectTo(\"./dashboard.html\");\r\n    });\r\n  } else {\r\n    console.error(\"Registration form element not found\");\r\n  }\r\n\r\n  // Event listener for user login\r\n  const login = document.getElementById(\"login-form\");\r\n  if (login) {\r\n    login.addEventListener(\"submit\", (e) => {\r\n      e.preventDefault();\r\n      const emailValue = document.getElementById(\"email\").value;\r\n      const passwordValue = document.getElementById(\"password\").value;\r\n      const user = loginUser(emailValue, passwordValue);\r\n      if (user) {\r\n        alert(\"Login successful\");\r\n        redirectTo(\"./dashboard.html\");\r\n      } else {\r\n        alert(\"Login failed\");\r\n      }\r\n    });\r\n  } else {\r\n    console.error(\"Login form element not found\");\r\n  }\r\n\r\n  // Event listener for user logout\r\n\r\n  if (dashLogout) {\r\n    dashLogout.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      redirectTo(\"./index.html\");\r\n    });\r\n  } else {\r\n    console.error(\"Logout button not found\");\r\n  }\r\n\r\n  // Event listener for article button\r\n\r\n  if (articleBtn && articleContainer && articleCloseBtn) {\r\n    articleBtn.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      articleContainer.style.display = \"block\";\r\n    });\r\n\r\n    articleCloseBtn.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      articleContainer.style.display = \"none\";\r\n    });\r\n  } else {\r\n    console.error(\"Article-related elements not found\");\r\n  }\r\n\r\n  // function to delete article\r\n  function deleteArticle() {\r\n    const card = document.querySelector(\".card\");\r\n    card.remove();\r\n  }\r\n\r\n  if (deleteArticleBtn) {\r\n    deleteArticleBtn.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      deleteArticle();\r\n    });\r\n  }\r\n\r\n\r\n});\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./public/app.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./public/app.js"]();
/******/ 	
/******/ })()
;